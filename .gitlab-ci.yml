image: node:alpine

services:
  - mongo

stages:
  - test

backend_test:
  stage: test
  before_script:
    - cd backend
    - npm install
  script:
    - npm test
  except:
    changes:
      - ".gitlab-ci.yml"
      - "README.md"
      - "backend/docs/*"
  only:
    refs:
      - develop
      - backend